# itmo-docker-task-5
приложение счетчик

Для запуска выгрузите приложение. Его можно запустить как из uvicorn, предварительно установив пакеты через poetry  
<code>uvicorn main:app --workers=3 --host 0.0.0.0 --port 8000</code> 
или соберите образ из Dockerfile

## Сборка докер-образа
``` docker build -t test_app . ```

### Список API точек:

1. `/ (GET)` - получить текущее значение;
2. `/stat (GET)` - увеличивает значение счетчика и возвращает его значение;
3. `/about (GET)` - вывод инициалов автора.

#### `/` (GET):
```json

0

```

#### `/stat` (GET):
```json
 1
```

#### `/about` (GET):
```
<h3> Hello, Mikhail Ivanov!</h3>
```

#### Добавлено в недавней лабораторной (docker-compose)
C помощью docker-compose запускаем два контейнера (первый с mysql базой, второй – с приложением-счетчиком. Что приложение счетчик, что docker-compose используют .env файл оттуда они настраивают настройки разворчивания субд и подключения к ней. Также в docker-compose встроен healthcheck субд:
```text
docker-compose up
```
Для пересборки контейнеров запускать в случае изменения исходников запускать
```text
docker-compose build
```
Запросы к субд идут через асинхронный драйвер aiomysql. При перезапусках приложения восстанавливается значения счётчика по последней записи таблицы.
